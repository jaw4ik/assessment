<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=AZ-WEU-EG01\SQL2012_E;Initial Catalog=external.easygenerator.com;Integrated Security=false;MultipleActiveResultSets=True;User ID=easygenerator;Password=Easy123!" providerName="System.Data.SqlClient" xdt:Transform="SetAttributes" xdt:Locator="Match(name)" />
    <add name="ElmahDBConnection" connectionString="Data Source=AZ-WEU-EG01\SQL2012_E;Initial Catalog=external.easygenerator.com-elmah;Integrated Security=false;MultipleActiveResultSets=True;User ID=easygenerator;Password=Easy123!" providerName="System.Data.SqlClient" xdt:Transform="Insert" />
  </connectionStrings>
  
  <fileStorage Path="../FileStorage" xdt:Transform="SetAttributes" />
  
  <mailSender interval="120" enable="true" xdt:Transform="SetAttributes">
    <mailTemplates>
      <mailTemplate name="SignedUpUserTemplate" to="v.kontsedaylo@ism.nl" xdt:Transform="SetAttributes" xdt:Locator="Match(name)"></mailTemplate>
      <mailTemplate name="FeedbackTemplate" to="v.kontsedaylo@ism.nl" xdt:Transform="SetAttributes" xdt:Locator="Match(name)"></mailTemplate>
      <mailTemplate name="NewsletterSubscriptionFailedTemplate" to="v.kontsedaylo@ism.nl" xdt:Transform="SetAttributes" xdt:Locator="Match(name)"></mailTemplate>
      <mailTemplate name="HttpRequestFailedTemplate" to="v.kontsedaylo@ism.nl" xdt:Transform="SetAttributes" xdt:Locator="Match(name)"></mailTemplate>
    </mailTemplates>
  </mailSender>

  <publication serviceUrl="//elearning.external.easygenerator.com" xdt:Transform="SetAttributes" />
	<wintoweb serviceUrl="http://wintoweb-staging.easygenerator.com/tickets" apiKey="ec0bd65a-222c-4b19-a32c-2a2cbd2eb3b8" xdt:Transform="SetAttributes" />
  
  <system.web>
    <compilation debug="false" xdt:Transform="SetAttributes" />
  </system.web>
    <system.webServer>
    <rewrite  xdt:Transform="Insert">
        <rules>
          <rule name="Image redirection" stopProcessing="true"  xdt:Transform="SetAttributes">
            <match url="(storage\/image\/)([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}(.jpg|.jpeg|.gif|.png|.bmp)$)" xdt:Transform="SetAttributes" />
            <action type="Redirect" url="https://images-staging.easygenerator.com/image/{ToLower:{R:2}}" xdt:Transform="SetAttributes" />
          </rule>
        </rules>
      </rewrite>
    </system.webServer>
  
  <system.net>
    <mailSettings>
      <smtp>
        <network host="127.0.0.1" port="25" xdt:Transform="SetAttributes" />
      </smtp>
    </mailSettings>
  </system.net>
  
  <elmah>
    <errorLog type="easygenerator.Web.Components.Elmah.SqlErrorLogExtended, easygenerator.Web" connectionStringName="ElmahDBConnection" applicationName="easygenerator" xdt:Transform="Insert" />
  </elmah>
  
</configuration>