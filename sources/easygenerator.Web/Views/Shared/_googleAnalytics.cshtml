@using System.Configuration

@if (ConfigurationManager.AppSettings.AllKeys.Contains("GoogleAnalyticsAccount") &&
        ConfigurationManager.AppSettings["GoogleAnalyticsAccount"].Length > 0)
{
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', '@ConfigurationManager.AppSettings["GoogleAnalyticsAccount"]']);
        @if (ConfigurationManager.AppSettings.AllKeys.Contains("GoogleAnalyticsDomain") &&
                ConfigurationManager.AppSettings["GoogleAnalyticsDomain"].Length > 0)
            {
                @:_gaq.push(['_setDomainName', '@ConfigurationManager.AppSettings["GoogleAnalyticsDomain"]']);
                            }
            else
            {
                @:_gaq.push(['_setDomainName', 'none']);
                            }

        _gaq.push(['_setAllowLinker', true]);
        _gaq.push(location.pathname === '/' ? ['_trackPageview', '/homepage'] : ['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
}