!function(){"use strict";function e(e,t,n){function i(){var e=a();angular.equals(o,e)||s.saveSettings(JSON.stringify(e),null).done(function(){o=e})}function a(e){return $.extend({},e||o,{xApi:r.trackingData.getData(),masteryScore:r.masteryScore.getData(),languages:r.languages.getData(),timer:r.timer.getData(),questionPool:r.questionPool.getData(),attempt:r.attempt.getData(),assessmentMode:r.assessmentMode.getData()})}var r=e,o=null,s=window.egApi;return r.isError=!1,r.trackingData=function(){function e(){return r.enableXAPI&&r.selectedLrs!==r.lrsOptions[0].key}function t(){return r.customLrsEnabled()&&r.authenticationRequired}function n(){r.advancedSettingsExpanded=!r.advancedSettingsExpanded}function i(e){r.enableXAPI=e.enabled||!1,r.allowToSkipTracking=!e.required;var t=e.enabled?"custom":"default";r.selectedLrs=e.selectedLrs||t,r.lrsUrl=e.lrs.uri||"",r.authenticationRequired=e.lrs.authenticationRequired||!1,r.lapLogin=e.lrs.credentials.username||"",r.lapPassword=e.lrs.credentials.password||"";var n;if(e.allowedVerbs)for(n in r.statements)r.statements.hasOwnProperty(n)&&(r.statements[n]=e.allowedVerbs.indexOf(n)>-1)}function a(){return{enabled:r.enableXAPI,required:!r.allowToSkipTracking,selectedLrs:r.selectedLrs,lrs:{uri:r.lrsUrl,authenticationRequired:r.authenticationRequired,credentials:{username:r.lapLogin,password:r.lapPassword}},allowedVerbs:$.map(r.statements,function(e,t){return e?t:void 0})}}var r={};return r.enableXAPI=!0,r.allowToSkipTracking=!1,r.lrsOptions=[{key:"default",text:"easygenerator (recommended)"},{key:"custom",text:"custom LRS"}],r.selectedLrs=r.lrsOptions[0].key,r.lrsOptions.forEach(function(e){e.isSelected=function(){return r.selectedLrs===e.key},e.select=function(){r.lrsOptions.forEach(function(e){e.isSelected(!1)}),e.isSelected(!0),r.selectedLrs=e.key}}),r.customLrsEnabled=e,r.lrsUrl="",r.authenticationRequired=!1,r.lapLogin="",r.lapPassword="",r.credentialsEnabled=t,r.statements={started:!0,stopped:!0,experienced:!0,mastered:!0,answered:!0,passed:!0,failed:!0},r.advancedSettingsExpanded=!1,r.toggleAdvancedSettings=n,r.init=i,r.getData=a,r}(),r.masteryScore=function(){function e(e){n.value=e&&e.score>=0&&e.score<=100?e.score:100}function t(){return{score:n.value||0}}var n={};return n.value=0,n.init=e,n.getData=t,n}(),r.languages=function(){function e(){var e=o(l);return e?e.resources:{}}function t(e,t){e.forEach(function(e){u.languagesList.push(new s(e.code,e.name,e.url,!1))}),i();var n=o(d),a=new s(l,"Custom",n?n.resourcesUrl:null,!0,t?t.customTranslations:null);u.languagesList.push(a),u.selectedLanguageCode=t&&t.selected?t.selected:d}function i(){u.languagesList.sort(function(e,t){return e.name.localeCompare(t.name)})}function a(){return{selected:u.selectedLanguageCode,customTranslations:u.getCustomTranslations()}}function o(e){return n("filter")(u.languagesList,{code:e})[0]}function s(e,t,n,i,a){function r(){return u?$.when():s(d.resourcesUrl).then(function(e){d.resources=$.isEmptyObject(d.resources)?e:o(d.resources,e),u=!0})}function o(e,t){var n={};return $.each(t,function(t,i){n[t]="string"==typeof e[t]?e[t]:i}),n}function s(e){return $.ajax({url:e,dataType:"json",contentType:"application/json"})}var u=!1,d=this;d.code=e,d.name=t,d.isEditable=i,d.resourcesUrl=n,d.resources=a||{},d.load=r}var u={},d="en",l="xx";return u.languagesList=[],u.selectedLanguageCode="",u.selectedLanguage=null,u.getCustomTranslations=e,u.init=t,u.getData=a,r.$watch("languages.selectedLanguageCode",function(){var e=o(u.selectedLanguageCode);e&&e.load().then(function(){u.selectedLanguage=e,r.$applyAsync()})}),u}(),r.timer=function(){function e(e){e&&e.time&&(n.enabled=e.enabled,n.hours=e.time.hours,n.minutes=e.time.minutes,n.seconds=e.time.seconds)}function t(){return{enabled:n.enabled,time:{hours:n.hours,minutes:n.minutes,seconds:n.seconds}}}var n={};return n.enabled=!1,n.hours=0,n.minutes=30,n.seconds=0,n.init=e,n.getData=t,n}(),r.questionPool=function(){function e(e){e&&(n.mode=e.mode,n.subsetSize=e.subsetSize,n.randomizeOrder=e.randomizeOrder,n.randomizePerAttempt=e.randomizePerAttempt)}function t(){var e={};return e.mode=n.mode,e.subsetSize=n.subsetSize,n.mode===n.modes.all?(e.randomizeOrder=n.randomizeOrder,e.randomizePerAttempt=n.randomizeOrder&&n.randomizePerAttempt):n.mode===n.modes.subset&&(e.randomizeOrder=!0,e.randomizePerAttempt=n.randomizePerAttempt),e}var n={};return n.modes={all:"all",subset:"subset"},n.mode=n.modes.all,n.subsetSize=10,n.randomizeOrder=!0,n.randomizePerAttempt=!1,n.init=e,n.getData=t,n}(),r.attempt=function(){function e(e){e&&(n.hasLimit=e.hasLimit,n.limit=e.limit)}function t(){return{hasLimit:n.hasLimit,limit:n.limit}}var n={hasLimit:!1,limit:3,init:e,getData:t};return n}(),r.assessmentMode=function(){function e(e){e&&(n.mode=e)}function t(){return n.mode}var n={init:e,getData:t};return n.modes={quiz:"quiz",exam:"exam"},n.mode=n.modes.quiz,n.attemptsSettings={quiz:{hasLimit:!0,limit:3},exam:{hasLimit:!0,limit:1}},n}(),e.$watch("assessmentMode.mode",function(e,t){r.assessmentMode.attemptsSettings[t]=r.attempt.getData(),r.attempt.init(r.assessmentMode.attemptsSettings[e])}),angular.element(t).on("blur",i),s.init().then(function(){var e=s.getManifest(),t=s.getSettings();r.trackingData.init(t.xApi),r.masteryScore.init(t.masteryScore),r.languages.init(e.languages,t.languages),r.timer.init(t.timer),r.questionPool.init(t.questionPool),r.attempt.init(t.attempt),r.assessmentMode.init(t.assessmentMode),o=a(t)}).fail(function(){r.isError=!0}).always(function(){r.$applyAsync()})}angular.module("configure",[]).controller("ConfigureController",["$scope","$window","$filter",e])}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t){var n=$(t),i="data-tab-link",a="data-tab",r="active",o=n.find("["+i+"]"),s=n.find("["+a+"]");s.hide(),o.first().addClass(r),s.first().show(),o.each(function(e,t){var u=$(t);u.on("click",function(){var e=u.attr(i),t=n.find("["+a+'="'+e+'"]');o.removeClass(r),u.addClass(r),s.hide(),t.show()})})}}}function t(){return{restrict:"A",scope:{toggleValue:"="},link:function(e,t){function n(){function e(e){r(e),o(e)}function t(){var e=n();r(!e),u.stop().animate({marginLeft:s(!e)},250)}function n(){return a.hasClass("on")}function i(t){n()!==t&&e(t)}function r(e){a.toggleClass("on",e),a.toggleClass("off",!e)}function o(e){u.css("margin-left",s(e)+"px")}function s(e){return e?0:a.height()-a.width()}var u=$(".switch-toggle-wrapper",a);return{setInitialValue:e,updateValue:i,toggle:t}}function i(e){var t=!1;a.mousedown(function(n){1===n.which&&(t=!0,e())}),a.click(function(){return t?void(t=!1):void e()})}var a=$(t),r=n();r.setInitialValue(e.toggleValue),e.$watch("toggleValue",function(e){r.updateValue(e)}),i(function(){r.toggle(),e.toggleValue=!e.toggleValue,e.$apply()})}}}function n(){return{restrict:"A",link:function(e,t){$(t).on("dragstart",function(e){e.preventDefault()})}}}function i(){return{restrict:"A",scope:{spinnerValue:"="},link:function(e,t){$(t).spinner("changing",function(t,n){e.spinnerValue=n,e.$apply()})}}}function a(){return{restrict:"A",scope:{numberValue:"="},link:function(e,t){var n=$(t),i=100;n.on("keydown",function(e){var t=e.charCode||e.keyCode||0;return 8===t||9===t||46===t||t>=37&&40>=t||t>=48&&57>=t||t>=96&&105>=t}),n.on("keyup",function(){e.numberValue>i&&(e.numberValue=i,e.$apply())})}}}function r(){return{restrict:"E",scope:{options:"=",value:"=",optionsValue:"=",optionsText:"="},link:function(e,t){var n={dropdown:"dropdown",disabled:"disabled",expanded:"expanded",optionsList:"dropdown-options-list",optionItem:"dropdown-options-item",currentItem:"dropdown-current-item",currentItemText:"dropdown-current-item-text",indicatorHolder:"dropdown-indicator-holder",indicator:"dropdown-indicator"};t.addClass(n.dropdown);var i=$("<div />").addClass(n.currentItem).appendTo(t);$("<div />").addClass(n.currentItemText).appendTo(i);var a=$("<div />").addClass(n.indicatorHolder).appendTo(i);$("<span />").addClass(n.indicator).appendTo(a),$("<ul />").addClass(n.optionsList).appendTo(t),i.on("click",function(e){t.hasClass(n.disabled)||(i.toggleClass(n.expanded),e.stopPropagation())});var r=function(){i.removeClass(n.expanded)};$("html").bind("click",r),$(window).bind("blur",r),e.$watchGroup(["options","value"],function(i){var a=t.find("ul."+n.optionsList),r=t.find("div."+n.currentItemText),o=i[0],s=i[1],u=e.optionsText,d=e.optionsValue;a.empty(),$.each(o,function(t,i){return i[d]==s?void r.text(i[u]):void $("<li />").addClass(n.optionItem).appendTo(a).text(i[u]).on("click",function(t){e.value=i[d],e.$apply()})})})}}}function o(){return function(e){return e?Object.keys(e):[]}}angular.module("configure").directive("tabs",e).directive("switchToggle",t).directive("disableDragAndDrop",n).directive("spinner",i).directive("number",a).directive("dropdown",r).filter("keys",o)}();