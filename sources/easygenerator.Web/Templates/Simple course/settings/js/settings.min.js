$(function(){window.getTranslations=function(){return{en:[{key:"[course]",value:"Course:"},{key:"[start course]",value:"Start course"},{key:"[finish course]",value:"Finish course"},{key:"[learning objectives]",value:"Learning objectives:"},{key:"[start]",value:"Start"},{key:"[home]",value:"Home"},{key:"[learning content]",value:"Learning content"},{key:"[submit]",value:"Submit"},{key:"[try again]",value:"Try again"},{key:"[next]",value:"Next"},{key:"[correct answer]",value:"Correct answer"},{key:"[incorrect answer]",value:"Incorrect answer"},{key:"[previous question]",value:"previous"},{key:"[next question]",value:"next"},{key:"[of]",value:"of"},{key:"[to complete]",value:"to complete"},{key:"[text matching question hint]",value:"Drag items from right column to the left to match the pairs"},{key:"[text matching question drop here]",value:"Drop here"},{key:"[statement question true text]",value:"True"},{key:"[statement question false text]",value:"False"},{key:"[drag and drop question all texts are placed]",value:"All texts are placed"},{key:"[drag and drop question drop here]",value:"Drop here"},{key:"[fill in the blank choose answer]",value:"Choose the answer..."},{key:"[thank you message]",value:"Thank you, you can close the page now"},{key:"[there are no questions]",value:"No questions"},{key:"[browser not supported]",value:"Your browser is currently not supported."},{key:"[browser not supported hint]",value:"Don’t worry, there is an easy fix. All you have to do is click one of the icons below and follow the instructions."},{key:"[page not found title]",value:"Page not found (404)"},{key:"[page not found message]",value:"Sorry, the page you have been looking for has not been found. Try checking the URL on errors, use the navigation above or click 'Home' link below."},{key:"[tracking and tracing header]",value:"Your credentials for progress tracking"},{key:"[tracking and tracing hint]",value:'Please enter your credentials and click "Start and report my results "to enable result tracking. Otherwise, click "Do not report, just start".'},{key:"[tracking and tracing name field]",value:"Your name"},{key:"[tracking and tracing email field]",value:"Your e-mail"},{key:"[tracking and tracing name is not valid]",value:"Fill in your name"},{key:"[tracking and tracing email is not valid]",value:"Enter a valid e-mail"},{key:"[tracking and tracing skip reporting]",value:"Do not report, just start"},{key:"[tracking and tracing start]",value:"Start and report my results"},{key:"[tracking and tracing error]",value:"Something is wrong"},{key:"[tracking and tracing error hint]",value:"If you continue without restarting, your learning results will not be reported."},{key:"[tracking and tracing restart course]",value:"Restart course"},{key:"[tracking and tracing continue anyway]",value:"Continue anyway"},{key:"[tracking and tracing reporting progress]",value:"reporting results..."}],nl:[{key:"[course]",value:"Cursus:"},{key:"[start course]",value:"Start cursus"},{key:"[finish course]",value:"Stop cursus"},{key:"[learning objectives]",value:"Leerdoelen:"},{key:"[start]",value:"Start"},{key:"[home]",value:"Home"},{key:"[learning content]",value:"Leerstof"},{key:"[submit]",value:"Invoeren"},{key:"[try again]",value:"Probeer opnieuw"},{key:"[next]",value:"Volgende"},{key:"[correct answer]",value:"Juist antwoord"},{key:"[incorrect answer]",value:"Onjuist antwoord"},{key:"[previous question]",value:"Vorige"},{key:"[next question]",value:"Volgende"},{key:"[of]",value:"van"},{key:"[to complete]",value:"compleet"},{key:"[text matching question hint]",value:"Sleep items van de rechterkolom naar links om kloppende paren te maken"},{key:"[text matching question drop here]",value:"Plaats hier"},{key:"[statement question true text]",value:"Waar"},{key:"[statement question false text]",value:"Niet waar"},{key:"[drag and drop question all texts are placed]",value:"Alle teksten zijn geplaatst"},{key:"[drag and drop question drop here]",value:"Plaats hier"},{key:"[fill in the blank choose answer]",value:"Kies het antwoord…"},{key:"[thank you message]",value:"Bedankt, je kan nu de pagina sluiten"},{key:"[there are no questions]",value:"Geen vragen"},{key:"[browser not supported]",value:"Uw browser wordt niet ondersteund."},{key:"[browser not supported hint]",value:"Maak je geen zorgen er is een simpeleoplossing. Klik op een van de iconen beneden en volg de instructies"},{key:"[page not found title]",value:"Pagina niet gevonden (404)"},{key:"[page not found message]",value:"Sorry, de pagina is niet gevonden. Controleer de link of klik op home."},{key:"[tracking and tracing header]",value:"Je gegevens om de resultaten op te slaan"},{key:"[tracking and tracing hint]",value:"Vul je gegevens in en druk op 'Start en leg mijn resultaten vast'. Of klik op 'leg mijn resultaten niet vast'"},{key:"[tracking and tracing name field]",value:"Naam"},{key:"[tracking and tracing email field]",value:"Email"},{key:"[tracking and tracing name is not valid]",value:"Vul je naam in"},{key:"[tracking and tracing email is not valid]",value:"Voer een geldig email adres in"},{key:"[tracking and tracing skip reporting]",value:"Leg mijn resultaten niet vast"},{key:"[tracking and tracing start]",value:"Start en leg mijn resultaten vast"},{key:"[tracking and tracing error]",value:"Er is iets misgegaan"},{key:"[tracking and tracing error hint]",value:"Als je doorgaat worden je leerresultaten niet vastgelegd"},{key:"[tracking and tracing restart course]",value:"Herstart cursus"},{key:"[tracking and tracing continue anyway]",value:"Ga door"},{key:"[tracking and tracing reporting progress]",value:"Resultaten vastleggen..."}],ua:[{key:"[course]",value:"Курс :"},{key:"[start course]",value:"Почати курс"},{key:"[finish course]",value:"Закінчити курс"},{key:"[learning objectives]",value:"Мета навчання:"},{key:"[start]",value:"Почати"},{key:"[home]",value:"Головна"},{key:"[learning content]",value:"Навчальный матеріал"},{key:"[submit]",value:"Відповісти"},{key:"[try again]",value:"Спробувати ще"},{key:"[next]",value:"Далі"},{key:"[correct answer]",value:"Правильна відповідь"},{key:"[incorrect answer]",value:"Неправильна відповідь"},{key:"[previous question]",value:"Назад"},{key:"[next question]",value:"Вперед"},{key:"[of]",value:"з"},{key:"[to complete]",value:"для досягнення цілі"},{key:"[text matching question hint]",value:"Перетягніть відповіді з правої колонки до лівої таким чином, щоб вони відповідали визначенням з першої колонки"},{key:"[text matching question drop here]",value:"Сюди"},{key:"[statement question true text]",value:"Вірно"},{key:"[statement question false text]",value:"Невірно"},{key:"[drag and drop question all texts are placed]",value:"Усі тексти вже використані"},{key:"[drag and drop question drop here]",value:"Сюди"},{key:"[fill in the blank choose answer]",value:"Оберіть варіант..."},{key:"[thank you message]",value:"Дякуємо. Тепер сторінку можна закрити"},{key:"[there are no questions]",value:"Питання відсутні"},{key:"[browser not supported]",value:"Ваш браузер не підтримується"},{key:"[browser not supported hint]",value:"Не хвилюйтеся, це легко виправити. Все, що вам потрібно - це натиснути на одну з іконок, розташованих нижче і дотримуватись інструкцій"},{key:"[page not found title]",value:"Сторінка не знайдена (404)"},{key:"[page not found message]",value:"Вибачте, але сторінку, яку ви шукали, не знайдено. Спробуйте перевірити URL на помилки, використати навігацію вище або посилання на головну сторінку нижче."},{key:"[tracking and tracing header]",value:"Ваші дані для відправки результатів"},{key:"[tracking and tracing hint]",value:'Будь-ласка, вкажіть необхідні дані та натисніть "Так, відстежувати мій прогрес" для того, щоб відправляти результати. Якщо Ви не бажаєте відстежувати прогрес, натисніть "Пропустити цей крок"'},{key:"[tracking and tracing name field]",value:"Ваше ім'я"},{key:"[tracking and tracing email field]",value:"Ваша електронна адреса"},{key:"[tracking and tracing name is not valid]",value:"Вкажіть Ваше ім'я"},{key:"[tracking and tracing email is not valid]",value:"Вкажіть дійсну електронну адресу"},{key:"[tracking and tracing skip reporting]",value:"Пропустити цей крок"},{key:"[tracking and tracing start]",value:"Так, відстежувати мій прогрес"},{key:"[tracking and tracing error]",value:"Помилка"},{key:"[tracking and tracing error hint]",value:"Натисніть 'Спробувати ще'. Якщо помилка повторюється і ви бажаєте продовжити курс без відправки результатів - натисніть 'Продовжити'."},{key:"[tracking and tracing restart course]",value:"Спробувати ще"},{key:"[tracking and tracing continue anyway]",value:"Продовжити"},{key:"[tracking and tracing reporting progress]",value:"Надсилаемо прогресс..."}]}}}),$(function(){function e(e){return decodeURI((RegExp(e+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}var t=e("courseId"),a=e("templateId"),n=location.protocol+"//"+location.host,r=n+"/api/course/"+t+"/template/"+a,o=location.toString().indexOf("/settings/settings"),i=location.toString().substring(0,o),s=1,l=window.getTranslations(),u={trackingData:function(){var e={};return e.enableXAPI=ko.observable(!0),e.lrsOptions=[{key:"default",text:"easygenerator (recommended)"},{key:"custom",text:"Custom LRS"}],e.selectedLrs=ko.observable(e.lrsOptions[0].key),ko.utils.arrayMap(e.lrsOptions,function(t){return t.isSelected=ko.computed({read:function(){return e.selectedLrs()==t.key},write:function(){}}),t.select=function(){ko.utils.arrayForEach(e.lrsOptions,function(e){e.isSelected(!1)}),t.isSelected(!0),e.selectedLrs(t.key)},t}),e.customLrsEnabled=ko.computed(function(){return e.enableXAPI()&&e.selectedLrs()!=e.lrsOptions[0].key}),e.lrsUrl=ko.observable(""),e.authenticationRequired=ko.observable(!1),e.lapLogin=ko.observable(),e.lapPassword=ko.observable(),e.credentialsEnabled=ko.computed(function(){return e.customLrsEnabled()&&e.authenticationRequired()}),e.statements={started:ko.observable(!0),stopped:ko.observable(!0),experienced:ko.observable(!0),mastered:ko.observable(!0),answered:ko.observable(!0),passed:ko.observable(!0),failed:ko.observable(!0)},e}(),isSaved:ko.observable(!1),isFailed:ko.observable(!1),advancedSettingsExpanded:ko.observable(!1),toggleAdvancedSettings:function(){this.advancedSettingsExpanded(!this.advancedSettingsExpanded())},logo:function(){var e={};return e.url=ko.observable("").extend({throttle:300}),e.hasLogo=ko.computed(function(){return""!==e.url()}),e.clear=function(){e.url("")},e.isError=ko.observable(!1),e.errorText=ko.observable(""),e.errorDescription=ko.observable(""),e.isLoading=ko.observable(!1),e}(),themes:function(){var e={};return e.list=[{title:"Cartoon light",key:"cartoon"},{title:"Grey scheme",key:"grey"},{title:"Black scheme",key:"black"},{title:"Flat scheme",key:"flat"}],e.default="cartoon",e.selected=ko.observable(""),ko.utils.arrayMap(e.list,function(t){return t.isSelected=ko.observable(!1),t.select=function(){ko.utils.arrayForEach(e.list,function(e){e.isSelected(!1)}),t.isSelected(!0),e.selected(t.key)},t}),e.setSelected=function(t){var a=ko.utils.arrayFirst(e.list,function(e){return e.key==t});a&&a.select()},e.setSelected(e.default),e.openDemo=function(){window.open(i+"?v="+(new Date).getTime()+"&theme="+e.selected(),"_blank")},e}(),defaultTranslations:$.extend(l,{xx:$.map(l.en,function(e){return{key:e.key,value:ko.observable(e.value)}})}),languages:[{key:"en",name:"English"},{key:"nl",name:"Dutch"},{key:"ua",name:"Ukrainian"},{key:"xx",name:"Custom"}],hasStarterPlan:ko.observable(!0),masteryScore:ko.observable("")};u.escapeHtml=function(e){return $("<div/>").text(e).html()},u.unescapeHtml=function(e){return $("<div/>").html(e).text()},u.selectedLanguage=ko.observable(u.languages[0].key),u.isCustom=ko.computed(function(){var e=u.selectedLanguage();return"xx"==e}),u.translations=ko.computed(function(){return u.defaultTranslations[u.selectedLanguage()]}),u.getCustomTranslations=function(){return u.defaultTranslations.xx},u.saveChanges=function(){var e={logo:{url:u.logo.url()},xApi:{enabled:u.trackingData.enableXAPI(),selectedLrs:u.trackingData.selectedLrs(),lrs:{uri:u.trackingData.lrsUrl(),authenticationRequired:u.trackingData.authenticationRequired(),credentials:{username:u.trackingData.lapLogin(),password:u.trackingData.lapPassword()}},allowedVerbs:$.map(u.trackingData.statements,function(e,t){return e()?t:void 0})},masteryScore:{score:u.masteryScore()},theme:{key:u.themes.selected()},translations:$.map(u.defaultTranslations[u.selectedLanguage()],function(e){return{key:e.key,value:u.escapeHtml(u.isCustom()?e.value():e.value)}})};u.isFailed(!1),u.isSaved(!1);var t={selectedLanguage:u.selectedLanguage(),customTranslations:$.map(u.getCustomTranslations(),function(e){return{key:e.key,value:u.escapeHtml(e.value())}})};$.post(r,{settings:JSON.stringify(e),extraData:JSON.stringify(t)}).done(function(){u.isSaved(!0)}).fail(function(){u.isFailed(!0)})},ko.bindingHandlers.fadeVisible={init:function(e,t){var a=t();$(e).toggle(ko.unwrap(a))},update:function(e,t){var a=t();ko.unwrap(a)?$(e).fadeIn():$(e).fadeOut()}},ko.bindingHandlers.number={init:function(e){var t=$(e),a=100;t.on("keydown",function(e){var t=e.charCode||e.keyCode||0;return 8==t||9==t||46==t||t>=37&&40>=t||t>=48&&57>=t||t>=96&&105>=t}),t.on("keyup",function(){$(this).val()>a&&$(this).val(a)})}},ko.bindingHandlers.disableDragNDrop={init:function(e){$(e).on("dragstart",function(e){e.preventDefault()})}},ko.bindingHandlers.spinner={init:function(e,t){var a=t();$(e).spinner("changed",function(e,t){a(t)})}},ko.bindingHandlers.switchToggle={init:function(e,t){var a=ko.bindingHandlers.switchToggle,n=a.viewModel(e,t),r=ko.unwrap(t().value());n.setInitialValue(r),a.onClick(e,function(){n.toggle();var e=ko.unwrap(t().value());t().value(!e)})},update:function(e,t){var a=ko.bindingHandlers.switchToggle.viewModel(e,t),n=ko.unwrap(t().value());a.updateValue(n)},viewModel:function(e){function t(e){o(e),i(e)}function a(){var e=n();o(!e),u.stop().animate({marginLeft:s(!e)},250)}function n(){return l.hasClass("on")}function r(e){n()!=e&&t(e)}function o(e){l.toggleClass("on",e),l.toggleClass("off",!e)}function i(e){u.css("margin-left",s(e)+"px")}function s(e){return e?0:l.height()-l.width()}var l=$(e),u=$(".switch-toggle-wrapper",l);return{setInitialValue:t,updateValue:r,toggle:a}},onClick:function(e,t){var a=$(e),n=!1;a.mousedown(function(e){1==e.which&&(n=!0,t())}),a.click(function(){return n?void(n=!1):void t()})}},ko.bindingHandlers.dropdown={cssClasses:{dropdown:"dropdown",disabled:"disabled",expanded:"expanded",optionsList:"dropdown-options-list",optionItem:"dropdown-options-item",currentItem:"dropdown-current-item",currentItemText:"dropdown-current-item-text",indicatorHolder:"dropdown-indicator-holder",indicator:"dropdown-indicator"},init:function(e){var t=$(e),a=ko.bindingHandlers.dropdown.cssClasses;t.addClass(a.dropdown);var n=$("<div />").addClass(a.currentItem).appendTo(t);$("<div />").addClass(a.currentItemText).appendTo(n);var r=$("<div />").addClass(a.indicatorHolder).appendTo(n);$("<span />").addClass(a.indicator).appendTo(r),$("<ul />").addClass(a.optionsList).appendTo(t),n.on("click",function(e){t.hasClass(a.disabled)||(n.toggleClass(a.expanded),e.stopPropagation())});var o=function(){n.removeClass(a.expanded)};$("html").bind("click",o),$(window).bind("blur",o),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$("html").unbind("click",o),$(window).unbind("blur",o)})},update:function(e,t){var a=$(e),n=ko.bindingHandlers.dropdown.cssClasses,r=a.find("ul."+n.optionsList),o=a.find("div."+n.currentItemText),i=t().options,s=t().optionsText,l=t().value,u=t().optionsValue,c=ko.unwrap(l),d=ko.unwrap(t().disable);d?a.toggleClass(n.disabled):a.removeClass(n.disabled),r.empty(),$.each(i,function(e,t){return t[u]==c?void o.text(t[s]):void $("<li />").addClass(n.optionItem).appendTo(r).text(t[s]).on("click",function(){l(t[u]),a.trigger("change")})})}},ko.bindingHandlers.tabs={init:function(e){var t=$(e),a="data-tab-link",n="data-tab",r="active",o=t.find("["+a+"]"),i=t.find("["+n+"]");i.hide(),o.first().addClass(r),i.first().show(),o.each(function(e,s){var l=$(s);l.on("click",function(){var e=l.attr(a),s=t.find("["+n+'="'+e+'"]');o.removeClass(r),l.addClass(r),i.hide(),s.show()})})}},ko.applyBindings(u,$("#settingsForm")[0]);var c={apiUrl:n+"/storage/image/upload",maxFileSize:10,supportedExtensions:["jpeg","jpg","png","bmp","gif"],somethingWentWrongMessage:{title:"Something went wrong",description:"Please, try again"},status:{"default":function(){u.logo.isLoading(!1),u.logo.isError(!1)},fail:function(e){u.logo.clear(),u.logo.isLoading(!1),u.logo.errorText(e.title),u.logo.errorDescription(e.description),u.logo.isError(!0)},loading:function(){u.logo.isLoading(!0)}},button:{enable:function(){this.$input.attr("disabled",!1).closest(".image-upload-button").removeClass("disabled")},disable:function(){this.$input.attr("disabled",!0).closest(".image-upload-button").addClass("disabled")},submit:function(){this.$input[0].form.submit(),this.disable(),c.status.loading()},$input:$("#logoInput")},init:function(){c.button.$input.on("change",c.processFile),c.button.enable()},processFile:function(){if(!this.files)return void c.button.submit();if(0!==this.files.length){var e=this.files[0],t=e.name.split(".").pop().toLowerCase();return-1===$.inArray(t,c.supportedExtensions)?void c.status.fail({title:"Unsupported image format",description:"(Allowed formats: "+c.supportedExtensions.join(", ")+")"}):e.size>1024*c.maxFileSize*1024?void c.status.fail({title:"File is too large",description:"(Max file size: "+c.maxFileSize+"MB)"}):void c.uploadFile(e)}},uploadFile:function(e){c.button.disable(),c.status.loading();var t=new FormData;t.append("file",e),$.ajax({url:c.apiUrl,type:"POST",data:t,cache:!1,dataType:"json",processData:!1,contentType:!1}).done(function(e){c.handleResponse(e)}).fail(function(){c.status.fail(c.somethingWentWrongMessage),c.button.enable()})},handleResponse:function(e){try{if(!e)throw"Response is empty";if("object"!=typeof e&&(e=JSON.parse(e)),!e||!e.success||!e.data)throw"Request is not success";u.logo.url(e.data.url),c.status.default()}catch(t){c.status.fail(c.somethingWentWrongMessage)}finally{c.button.enable()}}};$.ajax({cache:!1,url:r,dataType:"json",success:function(e){var t,a,n={logo:{},xApi:{enabled:!0,selectedLrs:"default",lrs:{credentials:{}}},masteryScore:{}},r={customTranslations:[]};try{t=JSON.parse(e.settings)||n}catch(o){t=n}try{a=JSON.parse(e.extraData)||r}catch(o){a=r}u.trackingData.enableXAPI(t.xApi.enabled||!1);var i=t.xApi.enabled?"custom":"default";u.trackingData.selectedLrs(t.xApi.selectedLrs||i),u.trackingData.lrsUrl(t.xApi.lrs.uri||""),u.trackingData.authenticationRequired(t.xApi.lrs.authenticationRequired||!1),u.trackingData.lapLogin(t.xApi.lrs.credentials.username||""),u.trackingData.lapPassword(t.xApi.lrs.credentials.password||""),t.xApi.allowedVerbs&&$.each(u.trackingData.statements,function(e,a){a($.inArray(e,t.xApi.allowedVerbs)>-1)}),u.logo.url(t.logo.url||""),u.masteryScore("undefined"!=typeof t.masteryScore&&t.masteryScore.score>=0&&t.masteryScore.score<=100?t.masteryScore.score:100),t.theme&&t.theme.key&&u.themes.setSelected(t.theme.key);var s=u.getCustomTranslations();return 0==a.customTranslations.length&&null!=t.translations?($.each(t.translations,function(e){$.each(s,function(a){t.translations[e].key===s[a].key&&s[a].value(u.unescapeHtml(t.translations[e].value))})}),void u.selectedLanguage("xx")):($.each(a.customTranslations,function(e){$.each(s,function(t){a.customTranslations[e].key===s[t].key&&s[t].value(u.unescapeHtml(a.customTranslations[e].value))})}),void(null!=a.selectedLanguage&&void 0!=a.selectedLanguage&&u.selectedLanguage(a.selectedLanguage)))},error:function(){u.masteryScore(100)}}),$.ajax({url:n+"/api/identify",type:"POST",contentType:"application/json",dataType:"json",success:function(e){if(e.hasOwnProperty("subscription")&&e.subscription.hasOwnProperty("accessType")){var t=e.subscription.accessType>=s&&new Date(e.subscription.expirationDate)>=new Date;u.hasStarterPlan(t),t&&c.init()}else u.hasStarterPlan(!1)},error:function(){u.hasStarterPlan(!1)}})});