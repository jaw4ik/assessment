!function(e){e.localize=function(e){return n[e]};var n={"changes are saved":"All changes are saved","changes are not saved":"Changes have NOT been saved. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","settings are not initialize":"Template settings are not initialized. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","graphical customization":"Graphical customization",cartoon:"Cartoon light",grey:"Grey scheme",black:"Black scheme",flat:"Flat scheme","custom course logo":"Custom course logo:",or:"or","upload logo image":"Upload logo image","upgrade account hint":'You have to <a target="_blank" href="/account/upgrade">upgrade your account</a> in order to set custom course logo',"recomend size":"- recommended size 300x50 px, allowed formats: jpeg, jpg, png, bmp, gif","logo update":"Change","logo remove":"Clear","choose color scheme":"Choose color scheme:",scheme:"Scheme:","background change":"Change background:","background update":"Change background","background remove":"Clear background","background original":"Original","background repeat":"Repeat","background fullscreen":"Fullscreen","background upgrade account hint":'You have to <a target="_blank" href="/account/upgrade">upgrade your account</a> in order to set custom course background',"Choose objective style:":"Choose objectives list style:","Display table of content:":"Display table of content:","Dont show":"Don't show",Show:"Show"}}(window.app=window.app||{}),function(){ko.bindingHandlers.localize={init:function(e,n){var t=$(e),o=ko.unwrap(n());t.html(app.localize(o))}},ko.bindingHandlers.switchToggle={init:function(e,n){var t=ko.bindingHandlers.switchToggle,o=t.viewModel(e,n),a=ko.unwrap(n().value());o.setInitialValue(a),t.onClick(e,function(){o.toggle();var e=ko.unwrap(n().value());n().value(!e)})},update:function(e,n){var t=ko.bindingHandlers.switchToggle.viewModel(e,n),o=ko.unwrap(n().value());t.updateValue(o)},viewModel:function(e){function n(e){i(e),r(e)}function t(){var e=o();i(!e),u.stop().animate({marginLeft:s(!e)},250)}function o(){return c.hasClass("on")}function a(e){o()!=e&&n(e)}function i(e){c.toggleClass("on",e),c.toggleClass("off",!e)}function r(e){u.css("margin-left",s(e)+"px")}function s(e){return e?0:c.height()-c.width()}var c=$(e),u=$(".switch-toggle-wrapper",c);return{setInitialValue:n,updateValue:a,toggle:t}},onClick:function(e,n){var t=$(e),o=!1;t.mousedown(function(e){1==e.which&&(o=!0,n())}),t.click(function(){return o?void(o=!1):void n()})}}}(),function(e){function n(e,n){function t(e){e&&a.enabled(e.enabled),a.enabled.subscribe(function(){n()})}function o(){return{enabled:a.enabled()}}var a=this;a.enabled=ko.observable(!0),a.getData=o,t(e)}function t(e,n){function t(e){e&&e.key&&s.selectByName(e.key)}function o(e){ko.utils.arrayForEach(s.list,function(e){e.isSelected(!1)}),e.isSelected(!0),n()}function a(e){ko.utils.arrayForEach(s.list,function(n){n.isSelected(n.name===e)})}function i(){return{key:s.selectedLayoutName()}}function r(e,n){var t=this;return t.name=e,t.isSelected=ko.observable(n===!0),t}var s=this;return s.list=[new r("Tiles",(!0)),new r("List")],s.selectedLayoutName=ko.computed(function(){var e="";return ko.utils.arrayForEach(s.list,function(n){n.isSelected()&&(e=n.name)}),e},s),s.select=o,s.selectByName=a,s.getData=i,t(e),s}e.TreeOfContentModel=n,e.SectionsLayoutModel=t}(window.app=window.app||{}),function(e){var n=null,t=null,o={isError:ko.observable(!1),treeOfContent:null,sectionsLayout:null};o.getCurrentSettingsData=function(e){return $.extend({},e||n,{treeOfContent:o.treeOfContent.getData(),sectionsLayout:o.sectionsLayout.getData()})},o.getCurrentExtraData=function(){return{}},o.saveChanges=function(){var a=o.getCurrentSettingsData(),i=o.getCurrentExtraData(),r=JSON.stringify(a),s=JSON.stringify(i);JSON.stringify(n)===r&&JSON.stringify(t)===s||window.egApi.saveSettings(r,s,e.localize("changes are saved"),e.localize("changes are not saved")).done(function(){n=a,t=i})},o.init=function(){var a=window.egApi;return a.init().then(function(){var i=a.getSettings();o.sectionsLayout=new e.SectionsLayoutModel(i.sectionsLayout,o.saveChanges),o.treeOfContent=new e.TreeOfContentModel(i.treeOfContent,o.saveChanges),n=o.getCurrentSettingsData(i),t=o.getCurrentExtraData()}).fail(function(){o.isError(!0)})},o.init().always(function(){$(document).ready(function(){ko.applyBindings(o,$(".settings-container")[0]),$(window).on("blur",o.saveChanges)})})}(window.app=window.app||{});