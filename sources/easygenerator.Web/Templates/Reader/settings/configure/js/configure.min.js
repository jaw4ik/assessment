!function(n){n.localize=function(n){return e[n]};var e={"changes are saved":"All changes are saved","changes are not saved":"Changes have NOT been saved. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","settings are not initialize":"Template settings are not initialized. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","template language":"Template language",xx:"Custom","choose language for your course":"Choose language for your course",defaultText:"Default",translation:"Translation"}}(window.app=window.app||{}),function(){ko.bindingHandlers.disableDragNDrop={init:function(n){$(n).on("dragstart",function(n){n.preventDefault()})}},ko.bindingHandlers.dropdown={cssClasses:{dropdown:"dropdown",disabled:"disabled",expanded:"expanded",optionsList:"dropdown-options-list",optionItem:"dropdown-options-item",currentItem:"dropdown-current-item",currentItemText:"dropdown-current-item-text",indicatorHolder:"dropdown-indicator-holder",indicator:"dropdown-indicator"},init:function(n,e){var a=$(n),t=ko.bindingHandlers.dropdown.cssClasses;a.addClass(t.dropdown);var o=$("<div />").addClass(t.currentItem).appendTo(a);$("<div />").addClass(t.currentItemText).appendTo(o);var i=$("<div />").addClass(t.indicatorHolder).appendTo(o);$("<span />").addClass(t.indicator).appendTo(i),$("<ul />").addClass(t.optionsList).appendTo(a),o.on("click",function(n){a.hasClass(t.disabled)||(o.toggleClass(t.expanded),n.stopPropagation())});var r=function(){o.removeClass(t.expanded)};$("html").bind("click",r),$(window).bind("blur",r),ko.utils.domNodeDisposal.addDisposeCallback(n,function(){$("html").unbind("click",r),$(window).unbind("blur",r)})},update:function(n,e){var a=$(n),t=ko.bindingHandlers.dropdown.cssClasses,o=a.find("ul."+t.optionsList),i=a.find("div."+t.currentItemText),r=e().options,s=e().optionsText,d=e().value,u=e().optionsValue,l=ko.unwrap(d),c=ko.unwrap(e().disable);c?a.toggleClass(t.disabled):a.removeClass(t.disabled),o.empty(),$.each(r,function(n,e){return e[u]==l?void i.text(e[s]):void $("<li />").addClass(t.optionItem).appendTo(o).text(e[s]).on("click",function(n){d(e[u]),a.trigger("change")})})}},ko.bindingHandlers.localize={init:function(n,e){var a=$(n),t=ko.unwrap(e());a.html(app.localize(t))}}}(),function(n){function e(e,a){function t(e,a){ko.utils.arrayForEach(e||[],function(n){s(new l(n.code,n.name,n.url))}),o();var t=d(p),i=new l(g,n.localize(g),t?t.resourcesUrl:null,a?a.customTranslations:null);s(i);var r=a&&a.selected?a.selected:p;c.selectedLanguageCode(r)}function o(){c.languages.sort(function(n,e){return n.name.localeCompare(e.name)})}function i(){return c.selectedLanguageCode()===g}function r(){var n=d(g);return n?n.getNotMappedTranslations():[]}function s(n){c.languages.push(n)}function d(n){return ko.utils.arrayFirst(c.languages,function(e){return e.code===n})}function u(){var n={};c.selectedLanguageCode()&&(n.selected=c.selectedLanguageCode());var e=r();return e&&!$.isEmptyObject(e)&&(n.customTranslations=e),n}function l(n,e,a,t){function o(n){g=u(n)}function i(){return g}function r(){return l(g)}function s(){return d(c.resourcesUrl).then(function(n){if(p){var e={};$.each(n,function(n,a){e[n]="string"==typeof p[n]?p[n]:a}),c.setTranslations(e)}else c.setTranslations(n);c.isLoaded=!0})}function d(n){return $.ajax({url:n,dataType:"json",contentType:"application/json"})}function u(n){var e=[];return n&&Object.keys(n).forEach(function(a){e.push({key:a,value:n[a]})}),e}function l(n){var e={};return n&&n.forEach(function(n){e[n.key]=n.value}),e}var c=this,g=[],p=t;c.code=n,c.name=e,c.isLoaded=!1,c.load=s,c.resourcesUrl=a,c.setTranslations=o,c.getTranslations=i,c.getNotMappedTranslations=r,t&&c.setTranslations(t)}var c=this,g="xx",p="en";c.languages=[];var f=ko.observable(a&&a.selected?a.selected:null);return c.selectedLanguageCode=ko.pureComputed({read:function(){return f()},write:function(n){var e=d(n);if(e){if(e.isLoaded)return void f(n);c.isLanguageLoading(!0),e.load().done(function(){f(n),c.isLanguageLoading(!1)})}}}),c.selectedLanguageTranslations=ko.pureComputed(function(){var n=d(c.selectedLanguageCode());return n?n.getTranslations():null}),c.isLanguageLoading=ko.observable(!1),c.isLanguageEditable=i,c.getCustomTranslations=r,c.getData=u,t(e,a),c}n.LanguagesModel=e}(window.app=window.app||{}),function(n){var e=null,a=null,t={isError:ko.observable(!1),languages:null};t.getCurrentSettingsData=function(n){return $.extend({},n||e,{languages:t.languages.getData()})},t.getCurrentExtraData=function(){return{}},t.saveChanges=function(){var o=t.getCurrentSettingsData(),i=t.getCurrentExtraData(),r=JSON.stringify(o),s=JSON.stringify(i);(JSON.stringify(e)!==r||JSON.stringify(a)!==s)&&window.egApi.saveSettings(r,s,n.localize("changes are saved"),n.localize("changes are not saved")).done(function(){e=o,a=i})},t.init=function(){var o=window.egApi;return o.init().then(function(){var i=o.getManifest(),r=o.getSettings();t.languages=new n.LanguagesModel(i.languages,r.languages),e=t.getCurrentSettingsData(r),a=t.getCurrentExtraData()}).fail(function(){t.isError(!0)})},t.init().always(function(){$(document).ready(function(){ko.applyBindings(t,$(".settings-container")[0]),$(window).on("blur",t.saveChanges)})})}(window.app=window.app||{});