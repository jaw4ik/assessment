!function(n){n.localize=function(n){return e[n]};var e={"changes are saved":"All changes are saved","changes are not saved":"Changes have NOT been saved. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","settings are not initialize":"Template settings are not initialized. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","template language":"Template language",xx:"Custom",en:"English",nl:"Dutch",ua:"Ukrainian","choose language for your course":"Choose language for your course",defaultText:"Default",translation:"Translation"}}(window.app=window.app||{}),function(){ko.bindingHandlers.disableDragNDrop={init:function(n){$(n).on("dragstart",function(n){n.preventDefault()})}},ko.bindingHandlers.dropdown={cssClasses:{dropdown:"dropdown",disabled:"disabled",expanded:"expanded",optionsList:"dropdown-options-list",optionItem:"dropdown-options-item",currentItem:"dropdown-current-item",currentItemText:"dropdown-current-item-text",indicatorHolder:"dropdown-indicator-holder",indicator:"dropdown-indicator"},init:function(n,e){var a=$(n),t=ko.bindingHandlers.dropdown.cssClasses;a.addClass(t.dropdown);var o=$("<div />").addClass(t.currentItem).appendTo(a);$("<div />").addClass(t.currentItemText).appendTo(o);var i=$("<div />").addClass(t.indicatorHolder).appendTo(o);$("<span />").addClass(t.indicator).appendTo(i),$("<ul />").addClass(t.optionsList).appendTo(a),o.on("click",function(n){a.hasClass(t.disabled)||(o.toggleClass(t.expanded),n.stopPropagation())});var s=function(){o.removeClass(t.expanded)};$("html").bind("click",s),$(window).bind("blur",s),ko.utils.domNodeDisposal.addDisposeCallback(n,function(){$("html").unbind("click",s),$(window).unbind("blur",s)})},update:function(n,e){var a=$(n),t=ko.bindingHandlers.dropdown.cssClasses,o=a.find("ul."+t.optionsList),i=a.find("div."+t.currentItemText),s=e().options,r=e().optionsText,d=e().value,u=e().optionsValue,l=ko.unwrap(d),c=ko.unwrap(e().disable);c?a.toggleClass(t.disabled):a.removeClass(t.disabled),o.empty(),$.each(s,function(n,e){return e[u]==l?void i.text(e[r]):void $("<li />").addClass(t.optionItem).appendTo(o).text(e[r]).on("click",function(n){d(e[u]),a.trigger("change")})})}},ko.bindingHandlers.localize={init:function(n,e){var a=$(n),t=ko.unwrap(e());a.html(app.localize(t))}}}(),function(n){function e(e,a){function t(e,a){ko.utils.arrayForEach(e||[],function(e){s(new u(e.code,n.localize(e.code),e.url))});var t=r(g),o=new u(c,n.localize(c),t?t.resourcesUrl:null,a?a.customTranslations:null);s(o);var i=a&&a.selected?a.selected:g;l.selectedLanguageCode(i)}function o(){return l.selectedLanguageCode()===c}function i(){var n=r(c);return n?n.getNotMappedTranslations():[]}function s(n){l.languages.push(n)}function r(n){return ko.utils.arrayFirst(l.languages,function(e){return e.code===n})}function d(){var n={};l.selectedLanguageCode()&&(n.selected=l.selectedLanguageCode());var e=i();return e&&!$.isEmptyObject(e)&&(n.customTranslations=e),n}function u(n,e,a,t){function o(n){g=u(n)}function i(){return g}function s(){return l(g)}function r(){return d(c.resourcesUrl).then(function(n){if(p){var e={};$.each(n,function(n,a){e[n]="string"==typeof p[n]?p[n]:a}),c.setTranslations(e)}else c.setTranslations(n);c.isLoaded=!0})}function d(n){return $.ajax({url:n,dataType:"json",contentType:"application/json"})}function u(n){var e=[];return n&&Object.keys(n).forEach(function(a){e.push({key:a,value:n[a]})}),e}function l(n){var e={};return n&&n.forEach(function(n){e[n.key]=n.value}),e}var c=this,g=[],p=t;c.code=n,c.name=e,c.isLoaded=!1,c.load=r,c.resourcesUrl=a,c.setTranslations=o,c.getTranslations=i,c.getNotMappedTranslations=s,t&&c.setTranslations(t)}var l=this,c="xx",g="en";l.languages=[];var p=ko.observable(a&&a.selected?a.selected:null);return l.selectedLanguageCode=ko.pureComputed({read:function(){return p()},write:function(n){var e=r(n);if(e){if(e.isLoaded)return void p(n);l.isLanguageLoading(!0),e.load().done(function(){p(n),l.isLanguageLoading(!1)})}}}),l.selectedLanguageTranslations=ko.pureComputed(function(){var n=r(l.selectedLanguageCode());return n?n.getTranslations():null}),l.isLanguageLoading=ko.observable(!1),l.isLanguageEditable=o,l.getCustomTranslations=i,l.getData=d,t(e,a),l}n.LanguagesModel=e}(window.app=window.app||{}),function(n){var e=null,a=null,t={isError:ko.observable(!1),languages:null};t.getCurrentSettingsData=function(n){return $.extend({},n||e,{languages:t.languages.getData()})},t.getCurrentExtraData=function(){return{}},t.saveChanges=function(){var o=t.getCurrentSettingsData(),i=t.getCurrentExtraData(),s=JSON.stringify(o),r=JSON.stringify(i);(JSON.stringify(e)!==s||JSON.stringify(a)!==r)&&window.egApi.saveSettings(s,r,n.localize("changes are saved"),n.localize("changes are not saved")).done(function(){e=o,a=i})},t.init=function(){var o=window.egApi;return o.init().then(function(){var i=o.getManifest(),s=o.getSettings();t.languages=new n.LanguagesModel(i.languages,s.languages),e=t.getCurrentSettingsData(s),a=t.getCurrentExtraData()}).fail(function(){t.isError(!0)})},t.init().always(function(){$(document).ready(function(){ko.applyBindings(t,$(".settings-container")[0]),$(window).on("blur",t.saveChanges)})})}(window.app=window.app||{});