!function(){"use strict";function e(e,t,n){function i(){var e=r();angular.equals(o,e)||s.saveSettings(JSON.stringify(e),null).done(function(){o=e})}function r(e){return $.extend({},e||o,{xApi:a.trackingData.getData(),masteryScore:a.masteryScore.getData(),languages:a.languages.getData(),timer:a.timer.getData(),questionPool:a.questionPool.getData(),attempt:a.attempt.getData()})}var a=e,o=null,s=window.egApi;return a.isError=!1,a.trackingData=function(){function e(){return a.enableXAPI&&a.selectedLrs!==a.lrsOptions[0].key}function t(){return a.customLrsEnabled()&&a.authenticationRequired}function n(){a.advancedSettingsExpanded=!a.advancedSettingsExpanded}function i(e){a.enableXAPI=e.enabled||!1,a.allowToSkipTracking=!e.required;var t=e.enabled?"custom":"default";a.selectedLrs=e.selectedLrs||t,a.lrsUrl=e.lrs.uri||"",a.authenticationRequired=e.lrs.authenticationRequired||!1,a.lapLogin=e.lrs.credentials.username||"",a.lapPassword=e.lrs.credentials.password||"";var n;if(e.allowedVerbs)for(n in a.statements)a.statements.hasOwnProperty(n)&&(a.statements[n]=e.allowedVerbs.indexOf(n)>-1)}function r(){return{enabled:a.enableXAPI,required:!a.allowToSkipTracking,selectedLrs:a.selectedLrs,lrs:{uri:a.lrsUrl,authenticationRequired:a.authenticationRequired,credentials:{username:a.lapLogin,password:a.lapPassword}},allowedVerbs:$.map(a.statements,function(e,t){return e?t:void 0})}}var a={};return a.enableXAPI=!0,a.allowToSkipTracking=!1,a.lrsOptions=[{key:"default",text:"easygenerator (recommended)"},{key:"custom",text:"custom LRS"}],a.selectedLrs=a.lrsOptions[0].key,a.lrsOptions.forEach(function(e){e.isSelected=function(){return a.selectedLrs===e.key},e.select=function(){a.lrsOptions.forEach(function(e){e.isSelected(!1)}),e.isSelected(!0),a.selectedLrs=e.key}}),a.customLrsEnabled=e,a.lrsUrl="",a.authenticationRequired=!1,a.lapLogin="",a.lapPassword="",a.credentialsEnabled=t,a.statements={started:!0,stopped:!0,experienced:!0,mastered:!0,answered:!0,passed:!0,failed:!0},a.advancedSettingsExpanded=!1,a.toggleAdvancedSettings=n,a.init=i,a.getData=r,a}(),a.masteryScore=function(){function e(e){n.value=e&&e.score>=0&&e.score<=100?e.score:100}function t(){return{score:n.value||0}}var n={};return n.value=0,n.init=e,n.getData=t,n}(),a.languages=function(){function e(){var e=r(d);return e?e.resources:{}}function t(e,t){e.forEach(function(e){s.languagesList.push(new o(e.code,e.name,e.url,!1))});var n=r(u),i=new o(d,"Custom",n?n.resourcesUrl:null,!0,t?t.customTranslations:null);s.languagesList.push(i),s.selectedLanguageCode=t&&t.selected?t.selected:u}function i(){return{selected:s.selectedLanguageCode,customTranslations:s.getCustomTranslations()}}function r(e){return n("filter")(s.languagesList,{code:e})[0]}function o(e,t,n,i,r){function a(){return u?$.when():s(d.resourcesUrl).then(function(e){d.resources=$.isEmptyObject(d.resources)?e:o(d.resources,e),u=!0})}function o(e,t){var n={};return $.each(t,function(t,i){n[t]="string"==typeof e[t]?e[t]:i}),n}function s(e){return $.ajax({url:e,dataType:"json",contentType:"application/json"})}var u=!1,d=this;d.code=e,d.name=t,d.isEditable=i,d.resourcesUrl=n,d.resources=r||{},d.load=a}var s={},u="en",d="xx";return s.languagesList=[],s.selectedLanguageCode="",s.selectedLanguage=null,s.getCustomTranslations=e,s.init=t,s.getData=i,a.$watch("languages.selectedLanguageCode",function(){var e=r(s.selectedLanguageCode);e&&e.load().then(function(){s.selectedLanguage=e,a.$applyAsync()})}),s}(),a.timer=function(){function e(e){e&&e.time&&(n.enabled=e.enabled,n.hours=e.time.hours,n.minutes=e.time.minutes,n.seconds=e.time.seconds)}function t(){return{enabled:n.enabled,time:{hours:n.hours,minutes:n.minutes,seconds:n.seconds}}}var n={};return n.enabled=!1,n.hours=0,n.minutes=30,n.seconds=0,n.init=e,n.getData=t,n}(),a.questionPool=function(){function e(e){e&&(n.mode=e.mode,n.subsetSize=e.subsetSize,n.randomizeOrder=e.randomizeOrder,n.randomizePerAttempt=e.randomizePerAttempt)}function t(){var e={};return e.mode=n.mode,e.subsetSize=n.subsetSize,n.mode===n.modes.all?(e.randomizeOrder=n.randomizeOrder,e.randomizePerAttempt=n.randomizeOrder&&n.randomizePerAttempt):n.mode===n.modes.subset&&(e.randomizeOrder=!0,e.randomizePerAttempt=n.randomizePerAttempt),e}var n={};return n.modes={all:"all",subset:"subset"},n.mode=n.modes.all,n.subsetSize=10,n.randomizeOrder=!0,n.randomizePerAttempt=!1,n.init=e,n.getData=t,n}(),a.attempt=function(){function e(e){e&&(n.hasLimit=e.hasLimit,n.limit=e.limit)}function t(){return{hasLimit:n.hasLimit,limit:n.limit}}var n={hasLimit:!1,limit:3,init:e,getData:t};return n}(),angular.element(t).on("blur",i),s.init().then(function(){var e=s.getManifest(),t=s.getSettings();a.trackingData.init(t.xApi),a.masteryScore.init(t.masteryScore),a.languages.init(e.languages,t.languages),a.timer.init(t.timer),a.questionPool.init(t.questionPool),a.attempt.init(t.attempt),o=r(t)}).fail(function(){a.isError=!0}).always(function(){a.$applyAsync()})}angular.module("configure",[]).controller("ConfigureController",["$scope","$window","$filter",e])}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t){var n=$(t),i="data-tab-link",r="data-tab",a="active",o=n.find("["+i+"]"),s=n.find("["+r+"]");s.hide(),o.first().addClass(a),s.first().show(),o.each(function(e,t){var u=$(t);u.on("click",function(){var e=u.attr(i),t=n.find("["+r+'="'+e+'"]');o.removeClass(a),u.addClass(a),s.hide(),t.show()})})}}}function t(){return{restrict:"A",scope:{toggleValue:"="},link:function(e,t){function n(){function e(e){a(e),o(e)}function t(){var e=n();a(!e),u.stop().animate({marginLeft:s(!e)},250)}function n(){return r.hasClass("on")}function i(t){n()!==t&&e(t)}function a(e){r.toggleClass("on",e),r.toggleClass("off",!e)}function o(e){u.css("margin-left",s(e)+"px")}function s(e){return e?0:r.height()-r.width()}var u=$(".switch-toggle-wrapper",r);return{setInitialValue:e,updateValue:i,toggle:t}}function i(e){var t=!1;r.mousedown(function(n){1===n.which&&(t=!0,e())}),r.click(function(){return t?void(t=!1):void e()})}var r=$(t),a=n();a.setInitialValue(e.toggleValue),e.$watch("toggleValue",function(e){a.updateValue(e)}),i(function(){a.toggle(),e.toggleValue=!e.toggleValue,e.$apply()})}}}function n(){return{restrict:"A",link:function(e,t){$(t).on("dragstart",function(e){e.preventDefault()})}}}function i(){return{restrict:"A",scope:{spinnerValue:"="},link:function(e,t){$(t).spinner("changing",function(t,n){e.spinnerValue=n,e.$apply()})}}}function r(){return{restrict:"A",scope:{numberValue:"="},link:function(e,t){var n=$(t),i=100;n.on("keydown",function(e){var t=e.charCode||e.keyCode||0;return 8===t||9===t||46===t||t>=37&&40>=t||t>=48&&57>=t||t>=96&&105>=t}),n.on("keyup",function(){e.numberValue>i&&(e.numberValue=i,e.$apply())})}}}function a(){return{restrict:"E",scope:{options:"=",value:"=",optionsValue:"=",optionsText:"="},link:function(e,t){var n={dropdown:"dropdown",disabled:"disabled",expanded:"expanded",optionsList:"dropdown-options-list",optionItem:"dropdown-options-item",currentItem:"dropdown-current-item",currentItemText:"dropdown-current-item-text",indicatorHolder:"dropdown-indicator-holder",indicator:"dropdown-indicator"};t.addClass(n.dropdown);var i=$("<div />").addClass(n.currentItem).appendTo(t);$("<div />").addClass(n.currentItemText).appendTo(i);var r=$("<div />").addClass(n.indicatorHolder).appendTo(i);$("<span />").addClass(n.indicator).appendTo(r),$("<ul />").addClass(n.optionsList).appendTo(t),i.on("click",function(e){t.hasClass(n.disabled)||(i.toggleClass(n.expanded),e.stopPropagation())});var a=function(){i.removeClass(n.expanded)};$("html").bind("click",a),$(window).bind("blur",a),e.$watchGroup(["options","value"],function(i){var r=t.find("ul."+n.optionsList),a=t.find("div."+n.currentItemText),o=i[0],s=i[1],u=e.optionsText,d=e.optionsValue;r.empty(),$.each(o,function(t,i){return i[d]==s?void a.text(i[u]):void $("<li />").addClass(n.optionItem).appendTo(r).text(i[u]).on("click",function(t){e.value=i[d],e.$apply()})})})}}}function o(){return function(e){return e?Object.keys(e):[]}}angular.module("configure").directive("tabs",e).directive("switchToggle",t).directive("disableDragAndDrop",n).directive("spinner",i).directive("number",r).directive("dropdown",a).filter("keys",o)}();