<div class="modal-dialog-wrapper publish-course" data-bind="dialog: { autoclose: true, isShown: isShown }">
    <!-- ko ifnot: _.isNullOrUndefined(publishAction()) -->
    <div class="package-action-item light-green publish-course">
        <div class="package-action-header">
            <h5 class="package-action-title" data-bind="localize: { text: 'publishCourse' }"></h5>
        </div>
        <div class="package-action-body">
            <div class="package-action-tabs-container">
                <ul class="package-action-tabs unstyled">
                    <li class="package-action-tabs-link link" data-bind="click: openLinkTab, localize: { text: 'link' }, css: { active: linkTabOpened }"></li>
                    <li class="package-action-tabs-link embed-code" data-bind="click: openEmbedTab, localize: { text: 'embed' }, css: { active: embedTabOpened }"></li>
                </ul>
                
                <!-- ko if: publishAction().packageExists() -->
                <div class="package-action-tabs-item-wrapper" data-bind="with: publishAction()">
                    <!-- ko if: courseHasUnpublishedChanges() -->
                    <!-- ko compose: { view: 'dialogs/publishCourse/updatePublishedCourse', model: $data } --><!-- /ko -->
                    <!-- /ko -->
                    <div class="package-action-tabs-item">
                        <div class="package-action-tabs-item-overlay" data-bind="visible: isCourseDelivering()"></div>

                        <!-- ko if: $parent.linkTabOpened -->
                        <div class="package-action-tabs-item-title" data-bind="localize: { text: 'privateLink' }"></div>
                        <div class="package-action-tabs-item-control">
                            <div class="private-link-control-wrapper">
                                <input type="text" class="private-link-input" readonly="readonly" data-bind="value: packageUrl(), selectText: state() === states.succeed" />
                            </div>
                            <div class="copy-btn-wrapper">
                                <button class="btn" data-bind="copyToClipboard: { value: packageUrl, onCopied: copyLinkToClipboard, isDisabled: copyBtnDisabled }, css: { green: !courseHasUnpublishedChanges(), 'green-white': courseHasUnpublishedChanges(), copied: linkCopied, disabled: copyBtnDisabled }, attr: { disabled: copyBtnDisabled() }">
                                    <span data-bind="localize: { text: linkCopied() ? 'copied' : 'copy' }"></span>
                                </button>
                            </div>
                        </div>
                        <div class="package-action-tabs-item-service">
                            <a class="private-link" data-bind="localize: { text: 'openInNewWindow' }, click: openPublishedCourse, attr: { href: packageUrl() }"></a>
                        </div>
                        <!-- /ko -->
                        <!-- ko if: $parent.embedTabOpened -->
                        <div class="package-action-tabs-item-title" data-bind="localize: { text: 'code' }"></div>
                        <div class="package-action-tabs-item-control">
                            <div class="private-link-control-wrapper">
                                <textarea readonly="readonly" class="embed-code-text" data-bind="value: embedCode, selectText: state() === states.succeed"></textarea>
                            </div>
                            <div class="copy-btn-wrapper">
                                <button class="btn" data-bind="copyToClipboard: { value: embedCode, onCopied: copyEmbedCodeToClipboard, isDisabled: copyBtnDisabled }, css: { green: !courseHasUnpublishedChanges(), 'green-white': courseHasUnpublishedChanges(), copied: embedCodeCopied, disabled: copyBtnDisabled }, attr: { disabled: copyBtnDisabled() }">
                                    <span data-bind="localize: { text: embedCodeCopied() ? 'copied' : 'copy' }"></span>
                                </button>
                            </div>
                        </div>
                        <div class="package-action-tabs-item-service embed-code">
                            <span class="proportions-title" data-bind="localize: { text: 'frameSize' }"></span>
                            <span class="proportions-value-container">
                                <span class="proportions-text" data-bind="localize: { text: 'croppedWidth' }"></span>
                                <input type="text" class="proportions-value" min="0" data-bind="numericField: {}, value: frameWidth, valueUpdate: ['afterkeydown', 'input'], event: { blur: validateFrameWidth }" />
                            </span>
                            <span class="proportions-value-container">
                                <span class="proportions-text" data-bind="localize: { text: 'croppedHeight' }"></span>
                                <input type="text" class="proportions-value" min="0" data-bind="numericField: {}, value: frameHeight, valueUpdate: ['afterkeydown', 'input'], event: { blur: validateFrameHeight }" />
                            </span>
                            <span class="propotions-size-unit" data-bind="localize: { text: 'croppedPixels' }"></span>
                        </div>
                        <!-- /ko -->
                    </div>
                </div>
                <!-- /ko -->

                <!-- ko ifnot: publishAction().packageExists() -->
                <div class="package-action-btn-holder" data-bind="with: publishAction()">
                    <button data-bind="click: publishCourse, css:{ disabled: isCourseDelivering(), progress : isPublishing()}" class="action-item-btn btn">
                        <!-- ko if: isPublishing() -->
                        <!-- ko if: state() === states.building -->
                        <span data-bind="localize: { text: 'assembling' }" class="action-item-btn-caption"></span>
                        <!-- /ko -->
                        <!-- ko if: state() === states.publishing -->
                        <span data-bind="localize: { text: 'publishing' }" class="action-item-btn-caption"></span>
                        <!-- /ko -->
                        <!-- /ko -->
                        <!-- ko ifnot: isPublishing() -->
                        <span data-bind="localize: { text: $parent.linkTabOpened() ? 'getPrivateLink' : 'getEmbedCode' }" class="action-item-btn-caption"></span>
                        <!-- /ko -->
                    </button>
                </div>
                <!-- /ko -->
            </div>
        </div>
    </div>
    <!-- /ko -->
</div>