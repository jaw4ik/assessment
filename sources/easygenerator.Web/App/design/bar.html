<section class="design left-side-bar">
    <!-- ko if: isThemesSupported && isOwner -->
    <div class="save-theme-button-container" data-bind="css: { disabled: !themesTab.hasUnsavedChanges() }">
        <!-- ko ifnot: themesTab.isCustomThemeSelected -->
        <button class="save-theme-button" data-bind="localize: { text: 'saveAsANewTheme' }, click: canSaveTheme() ? showCreateThemePopup : showThemesUpgradeDialog"></button>
        <!-- /ko -->
        <!-- ko if: themesTab.isCustomThemeSelected -->
        <!-- ko if: canSaveTheme -->
        <div class="save-theme-dropdown" data-bind="dropDown: {}">
            <button class="save-theme-button" data-bind="localize: { text: 'saveTheme' }"></button>
            <ul class="dropdown-list">
                <li class="dropdown-list-item new-theme" data-bind="click: showCreateThemePopup">
                    <span data-bind="localize: { text: 'saveAsANewTheme' }"></span>
                </li>
                <li class="dropdown-list-item current-theme" data-bind="click: updateTheme">
                    <span data-bind="localize: { text: 'saveAsCurrentTheme' }"></span>
                </li>
            </ul>
        </div>
        <!-- /ko -->
        <!-- ko ifnot: canSaveTheme -->
        <div class="save-theme-dropdown" data-bind="click: showThemesUpgradeDialog">
            <button class="save-theme-button" data-bind="localize: { text: 'saveTheme' }"></button>
        </div>
        <!-- /ko -->
        <!-- /ko -->
        <!-- ko compose: { model: createThemePopup } --><!-- /ko -->
    </div>
    <!-- /ko -->
    <div class="design-bar settings">
        <div class="design-bar-navigation">
            <!-- ko if: !template().isLoading() -->
            <ul class="design-bar-navigation-list">
                <!-- ko foreach: settingsTabs -->
                <!-- ko if: name === 'themes' -->
                <li class="design-bar-navigation-item" data-bind="css: { selected: isSelected }, css2: name, click:$root.changeTab.bind($root),tip: { key: 'unsavedChanges', placement: 'right', cssContainer: 'themes-unsaved-changes-tip', isShown: hasUnsavedChanges, container: '.left-side-bar' }">
                    <!-- ko if: hasUnsavedChanges -->
                    <div class="changed-mark"></div>
                    <!-- /ko -->
                    <div class="navigation-item-thumbnail settings-thumbnail" data-bind="css: name"></div>
                    <div class="navigation-item-title" data-bind="text:title"></div>
                </li>
                <!-- /ko -->
                <!-- ko ifnot: name === 'themes' -->
                <li class="design-bar-navigation-item" data-bind="css: { selected: isSelected }, css2: name, click:$root.changeTab.bind($root)">
                    <div class="navigation-item-thumbnail settings-thumbnail" data-bind="css: name"></div>
                    <div class="navigation-item-title" data-bind="text:title"></div>
                </li>
                <!-- /ko -->
                <!-- /ko -->
            </ul>
            <!-- /ko -->
        </div>

        <!-- ko if: tab() && tab().type=='external' -->
        <div class="design-bar-content custom">
            <!-- ko if: tab() && tab().type=='external' -->
            <!-- ko if: template().settingsAvailable && !settingsVisibility() -->
            <div data-bind="preloader: { settings: 'grey align-center', styles: { top: '300px' } }"></div>
            <!-- /ko -->
            <!-- ko if: template().settingsAvailable -->
            <iframe id="template-settings" class="template-settings" data-bind="style: { visibility: settingsVisibility() ? 'visible' : 'hidden' }, attr: { src: tab() && tab().url + '?v=' + appVersion + '&courseId=' + courseId + '&templateId=' + template().id }, event: { load: settingsFrameLoaded }, windowMessageListener: onGetTemplateMessage.bind($root)" frameborder="0"></iframe>
            <!-- /ko -->
            <!-- ko ifnot: template().settingsAvailable -->
            <span class="unavailable-settings" data-bind="localize: { text: 'templateDesignSettingsNotAvailable' }">Sorry, but the selected template doesn't contain design settings</span>
            <!-- /ko -->
            <!-- /ko -->
        </div>
        <!-- /ko -->
        <!-- ko if: tab() && tab().type=='default' -->
        <div class="design-bar-content" data-bind="scrollbar:{ checkDOMChanges: true }, compose: { model: tab(), activationData: [ settings, selectedTheme && selectedTheme.settings, allowEdit ] }"></div>
        <!-- /ko -->
        <!-- ko if: tab() && tab().type=='themes' -->
        <div class="design-bar-content" data-bind="scrollbar:{ checkDOMChanges: true }, compose: { model: tab(), activationData: [ template() && template().id, settings, selectedTheme, isOwner ] }">

        </div>
        <!-- /ko -->

    </div>

    <!-- ko foreach: popovers -->
    <!-- ko compose: { model: instance, compositionComplete: compositionComplete.bind($data) } -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- ko foreach: textStyleElements -->
    <!-- ko compose: { model: instance, compositionComplete: compositionComplete.bind($data) } -->
    <!-- /ko -->
    <!-- /ko -->


</section>