<div class="package-action-item light-green publish-course">
    <div class="package-action-header">
        <h5 class="package-action-title" data-bind="localize: { text: 'publishCourse' }"></h5>
    </div>
    <div class="package-action-body">
        <div class="package-action-tabs-container">
            <ul class="package-action-tabs unstyled">
                <li class="package-action-tabs-link link" data-bind="click: publishAction().openLinkTab, localize: { text: 'link' }, css: { active: publishAction().linkTabOpened }"></li>
                <li class="package-action-tabs-link embed-code" data-bind="click: publishAction().openEmbedTab, localize: { text: 'embed' }, css: { active: publishAction().embedTabOpened }"></li>
            </ul>

            <!-- ko if: publishAction().packageExists() -->
            <div class="package-action-tabs-item">
                <div class="package-action-tabs-item-overlay" data-bind="visible: isCourseDelivering()"></div>

                <!-- ko if: publishAction().linkTabOpened -->
                <div class="package-action-tabs-item-title" data-bind="localize: { text: 'privateLink' }"></div>
                <div class="package-action-tabs-item-control">
                    <div class="private-link-control-wrapper">
                        <input type="text" class="private-link-input" readonly="readonly" data-bind="value: publishAction().packageUrl(), selectText: publishAction().state() === states.succeed" />
                    </div>
                    <div class="copy-btn-wrapper">
                        <button class="btn green" data-bind="copyToClipboard: { value: publishAction().packageUrl, onCopied: publishAction().copyLinkToClipboard, isDisabled: publishAction().copyBtnDisabled }, css: { copied: publishAction().linkCopied, disabled: publishAction().copyBtnDisabled }, attr: { disabled: publishAction().copyBtnDisabled() }">
                            <span data-bind="localize: { text: publishAction().linkCopied() ? 'copied' : 'copy' }"></span>
                        </button>
                    </div>
                </div>
                <div class="package-action-tabs-item-service">
                    <a class="private-link" data-bind="localize: { text: 'openInNewWindow' }, click: publishAction().openPublishedCourse, attr: { href: publishAction().packageUrl() }"></a>
                </div>
                <!-- /ko -->

                <!-- ko if: publishAction().embedTabOpened -->
                <div class="package-action-tabs-item-title" data-bind="localize: { text: 'code' }"></div>
                <div class="package-action-tabs-item-control">
                    <div class="private-link-control-wrapper">
                        <textarea readonly="readonly" class="embed-code-text" data-bind="value: publishAction().embedCode, selectText: publishAction().state() === states.succeed"></textarea>
                    </div>
                    <div class="copy-btn-wrapper">
                        <button class="btn green" data-bind="copyToClipboard: { value: publishAction().embedCode, onCopied: publishAction().copyEmbedCodeToClipboard, isDisabled: publishAction().copyBtnDisabled }, css: { copied: publishAction().embedCodeCopied, disabled: publishAction().copyBtnDisabled }, attr: { disabled: publishAction().copyBtnDisabled() }">
                            <span data-bind="localize: { text: publishAction().embedCodeCopied() ? 'copied' : 'copy' }"></span>
                        </button>
                    </div>
                </div>
                <div class="package-action-tabs-item-service embed-code">
                    <span class="proportions-title" data-bind="localize: { text: 'frameSize' }"></span>
                    <span class="proportions-value-container">
                        <span class="proportions-text" data-bind="localize: { text: 'croppedWidth' }"></span>
                        <input type="text" class="proportions-value" min="0" data-bind="numericField: {}, value: publishAction().frameWidth, valueUpdate: ['afterkeydown', 'input'], event: { blur: publishAction().validateFrameWidth }" />
                    </span>
                    <span class="proportions-value-container">
                        <span class="proportions-text" data-bind="localize: { text: 'croppedHeight' }"></span>
                        <input type="text" class="proportions-value" min="0" data-bind="numericField: {}, value: publishAction().frameHeight, valueUpdate: ['afterkeydown', 'input'], event: { blur: publishAction().validateFrameHeight }" />
                    </span>
                    <span class="propotions-size-unit" data-bind="localize: { text: 'croppedPixels' }"></span>
                </div>
                <!-- /ko -->
            </div>
            <div class="package-action-tabs-item-seperate-line"></div>
            <!-- /ko -->

            <!-- ko ifnot: publishAction().packageExists() -->
            <div class="package-action-btn-holder">
                <button data-bind="click: publishAction().publishCourse, css:{ disabled: publishAction().isCourseDelivering(), progress : publishAction().isPublishing()}" class="action-item-btn btn">
                    <!-- ko if: publishAction().isPublishing() -->
                    <!-- ko if: publishAction().state() === states.building -->
                    <span data-bind="localize: { text: 'assembling' }" class="action-item-btn-caption"></span>
                    <!-- /ko -->
                    <!-- ko if: publishAction().state() === states.publishing -->
                    <span data-bind="localize: { text: 'publishing' }" class="action-item-btn-caption"></span>
                    <!-- /ko -->
                    <!-- /ko -->
                    <!-- ko ifnot: publishAction().isPublishing() -->
                    <!-- ko if: publishAction().packageExists() -->
                    <span data-bind="localize: { text: 'republishOnline' }" class="action-item-btn-caption"></span>
                    <!-- /ko -->
                    <!-- ko ifnot: publishAction().packageExists() -->
                    <span data-bind="localize: { text: publishAction().linkTabOpened() ? 'getPrivateLink' : 'getEmbedCode' }" class="action-item-btn-caption"></span>
                    <!-- /ko -->
                    <!-- /ko -->
                </button>
            </div>
            <!-- /ko -->
        </div>

        <!-- ko if: publishAction().packageExists() -->
        <div class="package-action-update-course-container">
            <div class="package-action-update-course-info" data-bind="localize: { text: 'updateCourseDescription' }"></div>
            <div class="package-action-update-course">
                <button class="btn green-white progress" data-bind="click: publishAction().publishCourse, css:{ 'progress': publishAction().isPublishing() }">
                    <!-- ko if: publishAction().isPublishing() -->
                    <!-- ko if: publishAction().state() === states.publishing || publishAction().state() === states.building  -->
                    <span data-bind="localize: { text: 'updating' }"></span>
                    <!-- /ko -->
                    <!-- /ko -->
                    <!-- ko ifnot: publishAction().isPublishing() -->
                    <span data-bind="localize: { text: 'reviewUpdateCourse' }"></span>
                    <!-- /ko -->
                </button>
            </div>
        </div>
        <!-- /ko -->
    </div>
</div>